(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{14:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(8),c=n.n(i),o=(n(14),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))}),r=n(2),m=n(3),l=n(5),u=n(4),h=n(9),d=n(0),j=function(e,t){return function(n){Object(l.a)(s,n);var a=Object(u.a)(s);function s(e){var t;return Object(r.a)(this,s),(t=a.call(this,e)).state={data:t.loadData()},t}return Object(m.a)(s,[{key:"saveData",value:function(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){localStorage.setItem(t,e)}}},{key:"loadData",value:function(){var e;try{e=JSON.parse(localStorage.getItem(t))}catch(n){e=localStorage.getItem(t)}return null===e?[]:e}},{key:"render",value:function(){return Object(d.jsx)(e,Object(h.a)({data:this.state.data,saveData:this.saveData.bind(this)},this.props))}}]),s}(a.Component)},b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={username:a.props.data,content:""},a}return Object(m.a)(n,[{key:"handleUserNameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){if(this.props.onSubmit){var e=this.state,t=e.username,n=e.content,a=+new Date;this.props.onSubmit({username:t,content:n,date:a}),this.setState({content:""})}}},{key:"componentDidMount",value:function(){this.textarea.focus()}},{key:"handleUserNameBlur",value:function(e){var t=e.target.value;t?this.props.saveData(t):alert("\u8bf7\u8f93\u5165\u540d\u79f0")}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"comment-input",children:[Object(d.jsxs)("div",{className:"comment-field",children:[Object(d.jsx)("span",{className:"comment-field-name",children:"\u7528\u6237\u540d\uff1a"}),Object(d.jsx)("div",{className:"comment-field-input",children:Object(d.jsx)("input",{value:this.state.username,onChange:this.handleUserNameChange.bind(this),onBlur:this.handleUserNameBlur.bind(this)})})]}),Object(d.jsxs)("div",{className:"comment-field",children:[Object(d.jsx)("span",{className:"comment-field-name",children:"\u8bc4\u8bba\u5185\u5bb9\uff1a"}),Object(d.jsx)("div",{className:"comment-field-input",children:Object(d.jsx)("textarea",{value:this.state.content,onChange:this.handleContentChange.bind(this),ref:function(t){e.textarea=t}})})]}),Object(d.jsx)("div",{className:"comment-field-button",children:Object(d.jsx)("button",{onClick:this.handleSubmit.bind(this),children:"\u53d1\u5e03"})})]})}}]),n}(a.Component),p=b=j(b,"username"),v=n(6),f=n.n(v),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={timeString:""},a}return Object(m.a)(n,[{key:"_updateTimeString",value:function(){var e=this.props.comment,t=(+Date.now()-e.date)/1e3;this.setState({timeString:t>60?"".concat(Math.round(t/60)," \u5206\u949f\u524d"):"".concat(Math.round(Math.max(t,1))," \u79d2\u524d")})}},{key:"componentDidMount",value:function(){this._updateTimeString(),this._timer=setInterval(this._updateTimeString.bind(this),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._timer)}},{key:"handleDeleteComment",value:function(){this.props.onDeleteComment&&this.props.onDeleteComment(this.props.index)}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"comment",children:[Object(d.jsxs)("div",{className:"content",children:[Object(d.jsxs)("span",{className:"comment-user",children:[this.props.comment.username," "]}),"\uff1a",Object(d.jsx)("div",{children:this.props.comment.content})]}),Object(d.jsxs)("div",{className:"content",children:[Object(d.jsx)("div",{className:"del-button",onClick:this.handleDeleteComment.bind(this),children:"\u5220\u9664"}),Object(d.jsx)("div",{className:"date-text",children:this.state.timeString})]})]})}}]),n}(a.Component);O.propsType={comment:f.a.object.isRequired,onDeleteComment:f.a.func.isRequired,index:f.a.number.isRequired};var x=O,C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"handleDeleteComment",value:function(e){this.props.onDeleteComment&&this.props.onDeleteComment(e)}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{children:this.props.comments.map((function(t,n){return Object(d.jsx)(x,{comment:t,index:n,onDeleteComment:e.handleDeleteComment.bind(e)},n)}))})}}]),n}(a.Component);C.defaultProps={comments:[]},C.propsType={comment:f.a.object.isRequired,onDeleteComment:f.a.func.isRequired};var g=C,D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={comments:a.props.data},a}return Object(m.a)(n,[{key:"handleSubmitContent",value:function(e){if(e){if(!e.username)return alert("\u8bf7\u8f93\u5165\u7528\u6237\u540d");if(!e.content)return alert("\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9");this.state.comments.push(e);var t=this.state.comments;this.setState({comment:t}),this.props.saveData(t)}}},{key:"handleDeleteComment",value:function(e){var t=this.state.comments;t.splice(e,1),this.setState({comments:t}),this.props.saveData(t)}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)(p,{onSubmit:this.handleSubmitContent.bind(this)}),Object(d.jsx)(g,{comments:this.state.comments,onDeleteComment:this.handleDeleteComment.bind(this)})]})}}]),n}(a.Component),S=D=j(D,"comments");c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root")),o()}},[[18,1,2]]]);
//# sourceMappingURL=main.5c48b2c1.chunk.js.map